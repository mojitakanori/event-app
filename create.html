<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>イベント作成 - イベント管理アプリ</title>
    <link rel="stylesheet" href="css/style.css">
    <style> /* ... (既存のスタイルは変更なし) ... */ </style>
</head>
<body>
    <header><h1>イベント管理アプリ</h1></header>
    <nav id="nav"></nav>
    <div class="container">
        <h2>新しいイベントを作成</h2>
        <div id="messageArea"></div>
        <form id="createEventForm">
            <div><label for="eventName">イベント名 (必須):</label><input type="text" id="eventName" name="eventName" required></div>
            <div><label for="eventDescription">説明:</label><textarea id="eventDescription" name="eventDescription"></textarea></div>
            <div><label for="eventDate">開始日時:</label><input type="datetime-local" id="eventDate" name="eventDate"></div>
            <div><label for="eventEndDate">終了予定日時:</label><input type="datetime-local" id="eventEndDate" name="eventEndDate"></div>
            <div><label for="eventLocation">場所:</label><input type="text" id="eventLocation" name="eventLocation"></div>
            <div><label for="participationFee">参加費用:</label><input type="text" id="participationFee" name="participationFee" placeholder="例: 1000円 または 無料"></div>
            
            <div> <!-- ← 追加 -->
                <label for="maxParticipants">最大参加人数 (任意):</label>
                <input type="number" id="maxParticipants" name="maxParticipants" min="1" placeholder="例: 50">
            </div>

            <div><label for="eventImages">イベント画像 (複数選択可):</label><input type="file" id="eventImages" name="eventImages" accept="image/*" multiple><div class="file-count-info" id="imageCountInfo"></div><div class="preview-container" id="imagePreviewContainer"></div></div>
            <div><label for="eventVideos">イベント動画 (複数選択可, MP4推奨):</label><input type="file" id="eventVideos" name="eventVideos" accept="video/*" multiple><div class="file-count-info" id="videoCountInfo"></div><div class="preview-container" id="videoPreviewContainer"></div></div>
            <fieldset id="formSchemaBuilder"><legend>追加の参加登録フォーム項目設定</legend><p>「氏名」と「利用規約への同意」は常に必須です。以下で自由に追加項目を設定できます。</p><div id="formFieldsContainer"></div><button type="button" id="addFormField">追加フォーム項目を追加</button></fieldset>
            <div id="loadingIndicator" class="loading-message" style="display: none;">アップロード中...</div>
            <button type="submit">イベントを作成</button>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/create.js"></script>
</body>
</html>